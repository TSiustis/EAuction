CKEDITOR.pasteFilters.image=function(e,t,n){var r=[];if(!n)return e;if(0===(t=function(e){for(var t,n=/<img[^>]+src="([^"]+)[^>]+/g,r=[];t=n.exec(e);)r.push(t[1]);return r}(e)).length)return e;if(0===(n=function(e){var t,n=[],r=/(\{\\pict[^{}]+?|\{\\\*\\shppict\{\\pict\{\\\*[^*]+?)\\(?:jpeg|png)blip/;if(!(e=e.match(new RegExp("(?:("+r.source+"))([\\da-fA-F\\s]+)\\}","g"))))return n;for(var i=0;i<e.length;i++)if(r.test(e[i])){if(-1!==e[i].indexOf("\\pngblip"))t="image/png";else{if(-1===e[i].indexOf("\\jpegblip"))continue;t="image/jpeg"}n.push({hex:t?e[i].replace(r,"").replace(/[^\da-fA-F]/g,""):null,type:t})}return n}(n)).length)return e;if(CKEDITOR.tools.array.forEach(n,function(e){r.push(e.type?"data:"+e.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(e.hex)):null)},this),t.length===r.length)for(n=0;n<t.length;n++)0===t[n].indexOf("file://")&&r[n]&&(e=e.replace(t[n],r[n]));return e};