!function(){var s=/"/g;CKEDITOR.plugins.add("autolink",{requires:"clipboard,textmatch",init:function(n){function i(t){var e;return t=(t={text:t,link:t.replace(s,"%22")}).link.match(n.config.autolink_urlRegex)?a.output(t):o.output(t),n.plugins.link&&(t=CKEDITOR.dom.element.createFromHtml(t),e=CKEDITOR.plugins.link.parseLinkAttributes(n,t),e=CKEDITOR.plugins.link.getLinkAttributes(n,e),CKEDITOR.tools.isEmpty(e.set)||t.setAttributes(e.set),e.removed.length&&t.removeAttributes(e.removed),t.removeAttribute("data-cke-saved-href"),t=t.getOuterHtml()),t}function r(t,e){var a=t.slice(0,e).split(/\s+/);return(a=a[a.length-1])&&l(a)?{start:t.lastIndexOf(a),end:e}:null}function l(t){return t.match(n.config.autolink_urlRegex)||t.match(n.config.autolink_emailRegex)}var a=new CKEDITOR.template('<a href="{link}">{text}</a>'),o=new CKEDITOR.template('<a href="mailto:{link}">{text}</a>');n.on("paste",function(t){var e;t.data.dataTransfer.getTransferType(n)!=CKEDITOR.DATA_TRANSFER_INTERNAL&&(-1<(e=t.data.dataValue).indexOf("<")||!l(e)||(t.data.dataValue=i(e),t.data.type="html"))}),CKEDITOR.env.ie&&!CKEDITOR.env.edge||n.on("key",function(t){var e,a;"wysiwyg"===n.mode&&-1!=CKEDITOR.tools.indexOf(n.config.autolink_commitKeystrokes,t.data.keyCode)&&(!(e=CKEDITOR.plugins.textMatch.match(n.getSelection().getRanges()[0],r))||((t=n.getSelection()).getRanges()[0].startContainer.getAscendant("a",!0)||(t.selectRanges([e.range]),n.insertHtml(i(e.text),"text"),CKEDITOR.env.webkit))||(e=t.getRanges()[0],(a=n.createRange()).setStartAfter(e.startContainer),t.selectRanges([a])))})}}),CKEDITOR.config.autolink_commitKeystrokes=[13,32],CKEDITOR.config.autolink_urlRegex=/^(https?|ftp):\/\/(-\.)?([^\s\/?\.#]+\.?)+(\/[^\s]*)?[^\s\.,]$/i,CKEDITOR.config.autolink_emailRegex=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/}();