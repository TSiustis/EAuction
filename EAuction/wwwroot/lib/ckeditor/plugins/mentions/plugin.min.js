!function(){function r(t,e){var n,r,o,s,a,i=e.feed;function c(t,e){var n=t.slice(0,e).match(a);if(!n)return null;var r=t[n.index-1];return void 0===r||r.match(/\s+/)?{start:n.index,end:e}:null}this.caseSensitive=e.caseSensitive,this.marker=e.hasOwnProperty("marker")?e.marker:"@",this.minChars=null!==e.minChars&&void 0!==e.minChars?e.minChars:2,(r=e.pattern)||(r=this.minChars,n="\\"+this.marker+"[_a-zA-Z0-9À-ž]",n=(r?n+"{"+r+",}":n+"*")+"$",r=new RegExp(n)),this.pattern=r,this.cache=void 0===e.cache||e.cache,this.throttle=void 0!==e.throttle?e.throttle:200,this._autocomplete=new CKEDITOR.plugins.autocomplete(t,{textTestCallback:(this.marker,this.minChars,a=this.pattern,function(t){return t.collapsed?CKEDITOR.plugins.textMatch.match(t,c):null}),dataCallback:(o=i,s=this,function(t,e){function n(t){t&&(t=CKEDITOR.tools.array.map(t,function(t){return CKEDITOR.tools.object.merge(t,{name:s.marker+t.name})}),e(t))}var r,a,i=t.query;s.marker&&(i=i.substring(s.marker.length)),CKEDITOR.tools.array.isArray(o)?n((r=o,a=1,CKEDITOR.tools.array.reduce(r,function(t,e){return t.push({name:e,id:a++}),t},[]).filter(function(t){return t=t.name,s.caseSensitive||(t=t.toLowerCase(),i=i.toLowerCase()),0===t.indexOf(i)}))):"string"==typeof o?function(){var e=new CKEDITOR.template(o).output({encodedQuery:encodeURIComponent(i)});if(s.cache&&u[e])return n(u[e]);CKEDITOR.ajax.load(e,function(t){t=JSON.parse(t),s.cache&&null!==t&&(u[e]=t),n(t)})}():o({query:i,marker:s.marker},n)}),itemTemplate:e.itemTemplate,outputTemplate:e.outputTemplate,throttle:this.throttle,itemsLimit:e.itemsLimit})}CKEDITOR._.mentions={cache:{}};var u=CKEDITOR._.mentions.cache;CKEDITOR.plugins.add("mentions",{requires:"autocomplete,textmatch,ajax",instances:[],init:function(e){var n=this;e.on("instanceReady",function(){CKEDITOR.tools.array.forEach(e.config.mentions||[],function(t){n.instances.push(new r(e,t))})})},isSupportedEnvironment:function(t){return t.plugins.autocomplete.isSupportedEnvironment(t)}}),r.prototype={destroy:function(){this._autocomplete.destroy()}},CKEDITOR.plugins.mentions=r}();